{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@fof/geoip/./node_modules/linkify-lite/index.js","webpack://@fof/geoip/webpack/bootstrap","webpack://@fof/geoip/webpack/runtime/compat get default export","webpack://@fof/geoip/webpack/runtime/define property getters","webpack://@fof/geoip/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/geoip/external root \"flarum.core.compat['admin/app']\"","webpack://@fof/geoip/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/geoip/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@fof/geoip/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@fof/geoip/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@fof/geoip/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@fof/geoip/./src/admin/components/ExtensionSettingsPage.js","webpack://@fof/geoip/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/geoip/./src/admin/index.js"],"sourcesContent":["'use strict';\n\nvar urlPattern = /(?:https?:)?\\/\\/(?:(?:[\\w-]+\\.)+[\\w/#@~.-]*)(?:\\?(?:[\\w&=.!,;$#%-]+)?)?/gi;\n\nmodule.exports = function(text) {\n    return (text || '').replace(urlPattern, function(url) {\n        return '<a href=\"' + url + '\">' + url + '</a>';\n    });\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","import app from 'flarum/admin/app';\nimport Alert from 'flarum/common/components/Alert';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport extractText from 'flarum/common/utils/extractText';\nimport linkify from 'linkify-lite';\n\nexport default class GeoipSettingsPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n  }\n\n  content() {\n    const service = this.setting('fof-geoip.service')();\n    const errorTime = Number(app.data.settings[`fof-geoip.services.${service}.last_error_time`]) * 1000;\n    let error = app.data.settings[`fof-geoip.services.${service}.error`];\n\n    if (error) error = linkify(error);\n\n    return [\n      <div className=\"container\">\n        <div className=\"geopage\">\n          <div className=\"Form-group\">\n            {this.buildSettingComponent({\n              type: 'select',\n              setting: 'fof-geoip.service',\n              label: app.translator.trans('fof-geoip.admin.settings.service_label'),\n              options: app.data['fof-geoip.services'].reduce((o, p) => {\n                o[p] = app.translator.trans(`fof-geoip.admin.settings.service_${p}_label`);\n                return o;\n              }, {}),\n              required: true,\n              help: service && m.trust(linkify(extractText(app.translator.trans(`fof-geoip.admin.settings.service_${service}_description`)))),\n            })}\n          </div>\n          {error\n            ? Alert.component(\n                {\n                  className: 'Form-group',\n                  dismissible: false,\n                },\n                [<b style={{ textTransform: 'uppercase', marginRight: '5px' }}>{humanTime(errorTime)}</b>, m.trust(error)]\n              )\n            : ''}\n\n          {['ipdata', 'ipapi-pro', 'ipsevenex'].includes(service)\n            ? [\n                this.buildSettingComponent({\n                  type: 'string',\n                  setting: `fof-geoip.services.${service}.access_key`,\n                  label: app.translator.trans('fof-geoip.admin.settings.access_key_label'),\n                  required: true,\n                }),\n              ]\n            : []}\n          {service === 'ipdata'\n            ? this.buildSettingComponent({\n                type: 'number',\n                setting: 'fof-geoip.services.ipdata.quota',\n                label: app.translator.trans('fof-geoip.admin.settings.quota_label'),\n                min: 1500,\n                placeholder: 1500,\n              })\n            : []}\n          {this.submitButton()}\n        </div>\n      </div>,\n    ];\n  }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import app from 'flarum/admin/app';\nimport GeoipSettingsPage from './components/ExtensionSettingsPage';\n\napp.initializers.add('fof/geoip', () => {\n  app.extensionData.for('fof-geoip').registerPage(GeoipSettingsPage);\n});\n"],"names":["urlPattern","module","exports","text","replace","url","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","GeoipSettingsPage","_ExtensionPage","subClass","superClass","apply","arguments","create","constructor","_proto","oninit","vnode","content","service","this","setting","errorTime","Number","app","settings","error","linkify","m","className","buildSettingComponent","type","label","trans","options","reduce","required","help","trust","extractText","Alert","dismissible","style","textTransform","marginRight","humanTime","includes","min","placeholder","submitButton","ExtensionPage","add","registerPage"],"sourceRoot":""}